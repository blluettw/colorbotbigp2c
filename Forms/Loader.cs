using Utorrent.Misc;
using Microsoft.Win32;
using Protections;
using System;
using System.Data;
using System.Diagnostics;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Net.Http;
using System.Net.NetworkInformation;
using System.Threading;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Utorrent.Forms
{
    public partial class Loader : Form
    {

        public static api KeyAuthApp = new api(
    name: "FG Arduino Private",
    ownerid: "zzyXKF9Dak",
    secret: "5f925c8590f082f20b41805c83d5aa2d47b6c9a9ec8768dd4814cf556bd56da2",
    version: "1.0"
);

        public class wfFXbGIyFQgcoDnyHEZiqISbpisHnjrKfmU
        {
            void imvtlboqpdPshOU()
            {
                string anUfmczAatppycgozkuJpajgwcLrBEgDoiPzUJfBTYveWcmjbI = "QDwUFUUTrZGRRDmflzSEJzTBGiKlyCzZHZJAtRnBeBFkogTRDL";
                string GLuOLIPmvxMkGpEvtnEkswKgyBizEEYINLwVClreWHdRMcKRkY = anUfmczAatppycgozkuJpajgwcLrBEgDoiPzUJfBTYveWcmjbI;
            }
        }
        public class rCaEeUEtHMcgGZHFFMtiyHxLmFCkJgroprU
        {
            void KoAsiSjblURufgc()
            {
                string dCdkpVfEQisYtcmBAyZxhoWRbjhrzAstPckuByYTSXPwgxMpIX = "dbNDSiaqUAbmMgtoijssiFqSxLAOEPTXxLqaLeWYOrDfKsxIVh";
                string PnucpGrJGKhGelLHQKnuXiiMiNxbQHJLqIHYcLSgARyLeBnUNK = dCdkpVfEQisYtcmBAyZxhoWRbjhrzAstPckuByYTSXPwgxMpIX;
            }
        }
        public class mtmDizjarGyaMmhGtpIlGELQiYmtXBEXwle
        {
            void uFwawwBPvYIVSYn()
            {
                string FPNqZcGeOVoBpnOhxJrWcFvsyKaKTpMKqFhYOMwRsMmOBLcJob = "AYzQIqMqbSSjBrTEpUhUJMZrRcfyzSUyYWORCcfUdHZExrzAuj";
                string KICEWeSAubOYISDQMGQCdhlUrEcrbfYXqFlxSKkyIrcdnLyORW = FPNqZcGeOVoBpnOhxJrWcFvsyKaKTpMKqFhYOMwRsMmOBLcJob;
            }
        }
        public class fsXlYUgFfMoctiXaCTBzSDzTLQpEmdtcEuZ
        {
            void jWlhPRgLtnFqDuN()
            {
                string zaIDrGBdUyBnzTmMLDNmaHqpbiNDHkSUNyieSthgxDYObTbsmX = "CGcRiqANgAgVTMnIeubIOUQmdhrdAjYTvrIhLxdYvtumPckjNn";
                string ymeQttNRiQPMIfvHkcQVDhtNtDRHDgsmxgAUWQmuVgOpFdKrbh = zaIDrGBdUyBnzTmMLDNmaHqpbiNDHkSUNyieSthgxDYObTbsmX;
            }
        }
        public class yDSbaJkbJpEhthjmTSlfnVJluRxCCLGYLci
        {
            void cKTUnqUPhIzOttm()
            {
                string KoXAfqxuaMsmXiUxfaCaQenlzaaeyPaWlTkNvJsYEbNLLSwxwc = "xJMBjiaXUiEDAKMOTrToTtuNnuSxcHzfCMRmoaOfYMYuYLpuiX";
                string IzDUQWnPMCEWNxwfCiDZyOHnrMMBONToWVZYiFUgoiQuKVRzIL = KoXAfqxuaMsmXiUxfaCaQenlzaaeyPaWlTkNvJsYEbNLLSwxwc;
            }
        }
        public class atuQKaHcVvXLIWpLgnesqmNdgmANJxVRLKf
        {
            void odoAaPHeLnhcGkU()
            {
                string KrGsfJfgUfQPFCJVjYAVseFeGubEsCaHIGtLLpXrkphvbZqHOF = "QIjDvEkGAbYgteDIiLXunMigNuRIzDhfZnkFHTDvlsawuSuVyu";
                string CdMfNWffKMIsMUSNmkAQiYDwzKCKGicjsJwtIKTolOILgigyBi = KrGsfJfgUfQPFCJVjYAVseFeGubEsCaHIGtLLpXrkphvbZqHOF;
            }
        }
        public class EIpxGSTwEQUixpWKPtCsNdmffUowhVDempt
        {
            void KyyqvCNJyDDpplo()
            {
                string AZBBiQcrsEACrGrePvrvFHARjhmiAmeHFsjOFcLqkWCeFyRpym = "InUdHCBxTgaqeYKXfjdFYQHjRRYLjJJoRqIpjKYXNfsnNBMIiP";
                string MgCTIcVGksqzqfLkLPJOhJpNcgjSEagwQyYXrxjdqIgRSOYpLv = AZBBiQcrsEACrGrePvrvFHARjhmiAmeHFsjOFcLqkWCeFyRpym;
            }
        }
        public class rAyaGBcIVTUcBtGwtnXVHYvsnaXCBgNWjJR
        {
            void SfcIwQyLndhqpKc()
            {
                string sZzPscbVzIwPDEcZaiJnnMbxfakUGVILeZbCGrGyfESEZrVcoQ = "rDsMvBsCFtGVluIjmdGVXsVXBBBsCcLJXXFalkfHRrAZSaOxZP";
                string WUhUcdugEfhlflSZiyWHjFbZGnUbENFvcHPFlQBbezRnVoXWKj = sZzPscbVzIwPDEcZaiJnnMbxfakUGVILeZbCGrGyfESEZrVcoQ;
            }
        }
        public class ZrnruDaVICQcqtolaheYGhwbGOQCFZJsVMh
        {
            void NoksRbFWGUDIlRy()
            {
                string rFcrWdHibpFTtIzWVQnTPNupBzgASGrlKCcRcEUKpRnVFxNoJH = "CudZnxyeYAfuqJlrLbiNngAeIUpnlDQaKUHGNzaDBPuNqRGZQa";
                string VtAYcbGISJIiBMZhGAXPfpmEzTBBEhoJnwagbYPMJJQKgFkHME = rFcrWdHibpFTtIzWVQnTPNupBzgASGrlKCcRcEUKpRnVFxNoJH;
            }
        }
        public class jKsrHcunGXLXWHqKOnAgvvyroWbYxOBnfoe
        {
            void ljmudcyOFaHwVZl()
            {
                string qUJKjWJTqNLPNmBkENFhmZlFishbzCyFQGxDaNjFoNOpDWToOI = "dTKNATjtgNYEUhCbgoTjCBtcxjvYQHTnijqPnKiyfJEtgbKvLp";
                string YYqSmOOccMgcvRdXKvtiIKCxyvnouyeMsOTnrefFnzfDFPpmBb = qUJKjWJTqNLPNmBkENFhmZlFishbzCyFQGxDaNjFoNOpDWToOI;
            }
        }
        public class YHWCtRQHLvGNmOHTxYhcphVpzOHIgKSZLat
        {
            void aUHXhmVTzjmcnJc()
            {
                string wZrYpuzNWNZvQWenEOHDmbwcraZCwcnBoEeOHWuoQGoHXkBZIh = "MLFKMioUHeNjrZSkbSXNNJaEoTxLqKffDDVLBbFzmrnBRfeBot";
                string ZCCQDXZGsfszNpvJjPSvWXxxdZcPgYUIzAvLyPbAVncBsozgTa = wZrYpuzNWNZvQWenEOHDmbwcraZCwcnBoEeOHWuoQGoHXkBZIh;
            }
        }
        public class CBuflUjhTsymBFzTxBRrkhYsPrupthjskwf
        {
            void amlPCFlveNuiXis()
            {
                string TMFmfJZdvhFLdPiHIdWKwDKVxJyWUbubiIUjKFbHcOSzVoHinS = "OAceUpPBHxvsiHqwikCoXpJwEeVvYnAFWrNybjJWPVCjyULOdN";
                string WmNXdFtUEsPVELFbaBnLrFjZZUOpAXsCuoBhbeLKaWcNJrawxA = TMFmfJZdvhFLdPiHIdWKwDKVxJyWUbubiIUjKFbHcOSzVoHinS;
            }
        }
        public class OoThXDyFPryhrVhRLLPbxSlKticGCbCgaWB
        {
            void YAsKSpkfGGVtLsz()
            {
                string VfNdfVRLzKGtDNmeApoanNZIDBaPBYwlzBiOEWhAVXUUjPSDCO = "NSVcCPXMRCqCevGaLYcZERffdLiQiWufvIbwtEgrgyMsmtYGKm";
                string mqZBXfAeUhWzygxQNkzykJpQlStZNVYVYdnuFNRembMymsJiNV = VfNdfVRLzKGtDNmeApoanNZIDBaPBYwlzBiOEWhAVXUUjPSDCO;
            }
        }
        public class lJOEjQaDNeLdMCMJIqnkHhtdRrDvlnzxIos
        {
            void iGzToOHeUmsPYgJ()
            {
                string LejOnmYOoXvDRgbqRZkgACmMQCJiJmTyqQYzIeJwAWCwHjyDdH = "JLuHZcaodQHEsomMyHeyuQgvynvGObuGjEaujjMYLwkuNlzCOo";
                string iTRPEdHexxOUYDlrTXodRnHcUTIDXpSiIYWvXOQHpskmUdLfgO = LejOnmYOoXvDRgbqRZkgACmMQCJiJmTyqQYzIeJwAWCwHjyDdH;
            }
        }
        public class kqUuGokOMezCbYesKQenHzfPIOnaOnflthU
        {
            void RNMZzrQmUngKqUE()
            {
                string okEoFrKnMMzgfyTNjPxNNhUciFPmdxFGplQJehtgIwSxgRTbuu = "iwtNetjAnvlybIzROZXpVcpovNAUvqePuMOvAEUVWnAhYngiiv";
                string iQuwriCtCdLlkdHpingKZqfvxxKKhyyYHCKixUdyIfmMHnPAta = okEoFrKnMMzgfyTNjPxNNhUciFPmdxFGplQJehtgIwSxgRTbuu;
            }
        }

        static string RandomFormName()
        {
            const string permitido = "ABCDEFGHIJKLMNOPQRSTUVWMXYZ0123456789";
            Random random = new Random();
            return new string(Enumerable.Repeat(permitido, 10)
                .Select(s => s[random.Next(s.Length)]).ToArray());
        }

        private void ChangeTitle()
        {
            try
            {
                if (this.InvokeRequired)
                {
                    this.Invoke((MethodInvoker)delegate
                    {
                        this.Text = RandomFormName();
                    });
                }
                else
                {
                    this.Text = RandomFormName();
                }
                Thread.Sleep(300);
            }
            catch { return; };
        }

        public Loader()
        {
            InitializeComponent();
            Icon icon = new Icon(".\\icone.ico");
            this.Icon = icon;
            this.FormClosing += new FormClosingEventHandler(Loader_FormClosing);

            if (!NetworkInterface.GetIsNetworkAvailable())
            {
                MessageBox(0, "Você precisa estar conectado a internet para usar o aimbot");
            }

            KeyAuthApp.init();
            if (!KeyAuthApp.response.success)
            {
                if (KeyAuthApp.response.message == "invalidver")
                {
                    string responseinver = string.Empty;
                    using (var httpClient = new HttpClient())
                    {
                        var getstatus = httpClient.GetStringAsync("http://15.235.61.214/Aimbot/unversion.php");
                        responseinver = getstatus.Result;
                    }

                    MessageBox(0, responseinver);
                    Environment.Exit(0);
                }

                MessageBox(0, KeyAuthApp.response.message);
                Application.Exit();
                Environment.Exit(-1);
            }
            if (KeyAuthApp.checkblack())
            {
                BlacklistFucker fuck = new BlacklistFucker();
              //  fuck.OMG();
            }
        }

        private async void iniciarprotessao()
        {
            while (true)
            {
                await ProtectionComponent.Initializer();
                await Task.Delay(5000);
            }
        }

        private async void Loader_Load(object sender, EventArgs e)
        {
            await ProtectionComponent.Initializer();
            ChangeTitle();
            string currentFileName = Process.GetCurrentProcess().MainModule.FileName;
            string currentFilePath = Path.GetDirectoryName(currentFileName);
            string currentFileExtension = Path.GetExtension(currentFileName);
            string newFileName = Path.GetFileNameWithoutExtension(currentFileName).Substring(0, 4) +
              Path.GetRandomFileName().Substring(0, 5).ToUpper() +
                currentFileExtension;
            string newFilePath = Path.Combine(currentFilePath, newFileName);
          //  File.Move(currentFileName, newFilePath);


            userLG.Text = "Usuário";
            senhaLG.Text = "Senha";
            userRG.Text = "Usuário";
            senhaRG.Text = "Senha";
            keyRG.Text = "Key";

            string caminho = "SOFTWARE\\FGAim";
            RegistryKey chave = Registry.CurrentUser.OpenSubKey(caminho);

            if (chave == null)
            {
                senhaLG.PasswordChar = '\0';
                userLG.ForeColor = Color.Gray;
                senhaLG.ForeColor = Color.Gray;
            }
            else
            {
                string user = chave.GetValue("User") as string;
                string senha = chave.GetValue("Senha") as string;


                if (user == null || senha == null)
                {
                    senhaLG.PasswordChar = '\0';
                    userLG.ForeColor = Color.Gray;
                    senhaLG.ForeColor = Color.Gray;
                }
                else
                {

                    userLG.Text = user;
                    senhaLG.Text = senha;
                    userLG.ForeColor = Color.White;
                    senhaLG.ForeColor = Color.White;
                    senhaLG.PasswordChar = '*';
                }

                chave.Close();
            }

            //gotologin.Checked = true;
            tabs.SelectedIndex = 0;
            Thread threadp = new Thread(new ThreadStart(iniciarprotessao));
            threadp.Start();
        }

        private void MessageBox(int tipo, string conteudo)
        {
            FGBox.FGBox m = new FGBox.FGBox(tipo, conteudo);
            m.ShowDialog();
        }


        private void Entrar_Click(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(userLG.Text) || userLG.Text == "Usuário")
            {
                MessageBox(0, "Você deve inserir um usuário!");
                return;
            }
            if (string.IsNullOrWhiteSpace(senhaLG.Text) || senhaLG.Text == "Senha")
            {
                MessageBox(0, "Você deve inserir uma senha!");
                return;
            }

            Misc.SaveLogin registro = new Misc.SaveLogin();

            string webhooklogin = KeyAuthApp.var("login");
            string webhookloginerr = KeyAuthApp.var("errlogin");

            KeyAuthApp.login(userLG.Text, senhaLG.Text);

            if (KeyAuthApp.response.success)
            {
             //   SendDiscordWebhook.log(webhooklogin, "Novo login no Aimbot!\n**User:** " + userLG.Text, true);
                registro.Salvar(userLG.Text, senhaLG.Text);
                goMain();
            }
            if (!KeyAuthApp.response.success)
            {
                registro.Deletar();
              //  SendDiscordWebhook.log(webhookloginerr, $"Erro de login no Aimbot!\n**Erro:** {KeyAuthApp.response.message}\n**User inserido:** {userLG.Text}", true);
                MessageBox(0, KeyAuthApp.response.message);
                userLG.Text = "Usuário";
                userLG.ForeColor = Color.Gray;
                senhaLG.Text = "Senha";
                senhaLG.ForeColor = Color.Gray;
                senhaLG.PasswordChar = '\0';
            }
        }

        private void closeformlogin_Click(object sender, EventArgs e)
        {
            Environment.Exit(0);
            Application.Exit();
        }

        private void userLG_Enter(object sender, EventArgs e)
        {
            if (userLG.Text == "Usuário")
            {
                userLG.Clear();
                userLG.ForeColor = Color.White;
            }
        }

        private void userLG_Leave(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(userLG.Text))
            {
                userLG.Text = "Usuário";
                userLG.ForeColor = Color.Gray;
            }
        }

        private void senhaLG_Enter(object sender, EventArgs e)
        {
            if (senhaLG.Text == "Senha")
            {
                senhaLG.Clear();
                senhaLG.ForeColor = Color.White;
                senhaLG.PasswordChar = '*';
            }
        }

        private void senhaLG_Leave(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(senhaLG.Text))
            {
                senhaLG.Text = "Senha";
                senhaLG.ForeColor = Color.Gray;
                senhaLG.PasswordChar = '\u0000';
            }
        }



        private void gotologin_Click(object sender, EventArgs e)
        {
            tabs.SelectedIndex = 0;
        }

        private void gotoreg_Click(object sender, EventArgs e)
        {
            tabs.SelectedIndex = 1;
        }


        private void Register_Click(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(userRG.Text) || userRG.Text == "Usuário")
            {
                MessageBox(0, "Você deve inserir um usuário!");
                return;
            }
            if (string.IsNullOrWhiteSpace(senhaRG.Text) || senhaRG.Text == "Senha")
            {
                MessageBox(0, "Você deve inserir uma senha!");
                return;
            }
            if (string.IsNullOrWhiteSpace(keyRG.Text) || keyRG.Text == "Key")
            {
                MessageBox(0, "Você deve inserir uma key!");
                return;
            }

            string webhookreg = KeyAuthApp.var("registros");
            string webhookregerr = KeyAuthApp.var("registroserr");

            KeyAuthApp.register(userRG.Text, senhaRG.Text, keyRG.Text);

            if (KeyAuthApp.response.success)
            {
             

                //SendDiscordWebhook.log(webhookreg, "Novo registro no Aimbot!\n**Key resgatada:** || " + keyRG.Text + " ||\n**User criado:** " + userRG.Text + "\n**Senha criada:** ||" + senhaRG.Text + "||\n**Processador:** ", true);
                MessageBox(1, "Registrado com sucesso!");
                goMain();
            }
            if (!KeyAuthApp.response.success)
            {
               // SendDiscordWebhook.log(webhookregerr, "Erro de registro no Aimbot!\n**Erro:** " + KeyAuthApp.response.message, true);
                MessageBox(0, KeyAuthApp.response.message);
                userRG.Text = "Usuário";
                userRG.ForeColor = Color.Gray;
                senhaRG.Text = "Senha";
                senhaRG.ForeColor = Color.Gray;
                senhaRG.PasswordChar = '\0';
                keyRG.Text = "Key";
                keyRG.ForeColor = Color.Gray;
                keyRG.PasswordChar = '\0';
            }
        }

        private void userRG_Enter(object sender, EventArgs e)
        {
            if (userRG.Text == "Usuário")
            {
                userRG.Clear();
                userRG.ForeColor = Color.White;
            }
        }

        private void userRG_Leave(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(userRG.Text))
            {
                userRG.Text = "Usuário";
                userRG.ForeColor = Color.Gray;
            }
        }

        private void senhaRG_Enter(object sender, EventArgs e)
        {
            if (senhaRG.Text == "Senha")
            {
                senhaRG.Clear();
                senhaRG.ForeColor = Color.White;
                senhaRG.PasswordChar = '*';
            }
        }

        private void senhaRG_Leave(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(senhaRG.Text))
            {
                senhaRG.Text = "Senha";
                senhaRG.ForeColor = Color.Gray;
                senhaRG.PasswordChar = '\u0000';
            }
        }

        private void keyRG_Enter(object sender, EventArgs e)
        {
            if (keyRG.Text == "Key")
            {
                keyRG.Clear();
                keyRG.ForeColor = Color.White;
                keyRG.PasswordChar = '*';
            }
        }

        private void keyRG_Leave(object sender, EventArgs e)
        {
            if (string.IsNullOrWhiteSpace(keyRG.Text))
            {
                keyRG.Text = "Key";
                keyRG.ForeColor = Color.Gray;
                keyRG.PasswordChar = '\u0000';
            }
        }

        public static string DriverConnect = string.Empty;
        private void goMain()
        {
            KeyAuthApp.check();
            if (!KeyAuthApp.response.success)
            {
                Environment.Exit(-1);
            }
            else
            {
                this.Hide();
                Main m = new Main();
                m.Show();
            }
        }

        private void siticoneButton1_Click(object sender, EventArgs e)
        {
            Environment.Exit(0);
        }

        private void Loader_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (e.CloseReason == CloseReason.UserClosing)
            {
                Application.Exit();
                Environment.Exit(0);
            }
        }

        private void userLG_TextChanged(object sender, EventArgs e)
        {

        }

        private void login_Click(object sender, EventArgs e)
        {

        }

        private void TB_Click(object sender, EventArgs e)
        {

        }

        private void tabs_SelectedIndexChanged(object sender, EventArgs e)
        {
        }

        private void reg_Click(object sender, EventArgs e)
        {

        }

        private void horizontalbarra_Click(object sender, EventArgs e)
        {

        }

        private void pl_Paint(object sender, PaintEventArgs e)
        {

        }

        private void verticalbarra_Click(object sender, EventArgs e)
        {

        }

        private void pictureBox1_Click(object sender, EventArgs e)
        {

        }

        private void iLabel1_Click(object sender, EventArgs e)
        {

        }

        private void senhaLG_TextChanged(object sender, EventArgs e)
        {

        }

        private void iLabel2_Click(object sender, EventArgs e)
        {

        }

        private void keyRG_TextChanged(object sender, EventArgs e)
        {

        }

        private void senhaRG_TextChanged(object sender, EventArgs e)
        {

        }

        private void userRG_TextChanged(object sender, EventArgs e)
        {

        }

        private void siticoneButton2_Click(object sender, EventArgs e)
        {
          
        }

        private void botao1_Click(object sender, EventArgs e)
        {
            tabs.SelectedIndex = 1;
        }
    }
}
